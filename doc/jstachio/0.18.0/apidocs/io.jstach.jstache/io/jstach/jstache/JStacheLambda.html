<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (18) -->
<title>JStacheLambda (jstachio API 0.18.0)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: module: io.jstach.jstache, package: io.jstach.jstache, annotation type: JStacheLambda">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jstachio.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon"></span><span class="nav-bar-toggle-icon"></span><span class="nav-bar-toggle-icon"></span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<div class="about-language"><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>                 <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/handlebars.min.js"></script>                 <script>hljs.highlightAll();</script></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="../../../module-summary.html">Module</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/JStacheLambda.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li><a href="#field-summary">Field</a></li>
<li>Required</li>
<li><a href="#annotation-interface-optional-element-summary">Optional</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li><a href="#field-detail">Field</a></li>
<li><a href="#annotation-interface-element-detail">Element</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li>Required&nbsp;|&nbsp;</li>
<li><a href="#annotation-interface-optional-element-summary">Optional</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#annotation-interface-element-detail">Element</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="module-label-in-type">Module</span>&nbsp;<a href="../../../module-summary.html">io.jstach.jstache</a></div>
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">io.jstach.jstache</a></div>
<h1 title="Annotation Interface JStacheLambda" class="title">Annotation Interface JStacheLambda</h1>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="annotations"><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/annotation/Retention.html" title="class or interface in java.lang.annotation" class="external-link">@Retention</a>(<a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/annotation/RetentionPolicy.html#RUNTIME" title="class or interface in java.lang.annotation" class="external-link">RUNTIME</a>)
<a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/annotation/Target.html" title="class or interface in java.lang.annotation" class="external-link">@Target</a>(<a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/annotation/ElementType.html#METHOD" title="class or interface in java.lang.annotation" class="external-link">METHOD</a>)
<a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/annotation/Documented.html" title="class or interface in java.lang.annotation" class="external-link">@Documented</a>
</span><span class="modifiers">public @interface </span><span class="element-name"><a href="../../../../src-html/io.jstach.jstache/io/jstach/jstache/JStacheLambda.html#line-154">JStacheLambda</a></span></div>
<div class="block">Tag a method to be used as a mustache lambda section for custom logic.
 <p>
 Lambda sections look like regular mustache sections but execute code and is one of the
 only ways to add custom logic to mustache templates.

 Lambda sections look something like: <pre><code class="language-hbs">
 {{#context}}
 {{#lambda}}body{{/lambda}}
 {{/context}}
 </code></pre> Where in the above example a lambda is named "lambda" and optionally has
 access to the object called "context" and the raw body passed to the lambda is "body".
 A nonexhaustive example of the above lambda in Java assuming the context type is
 <code>SomeType</code> <em>might</em> look like:

 <pre><code class="language-java">
 &#64;JStacheLambda
 &#64;JStacheLambda.Raw
 public String lambda(SomeType context, &#64;JStacheLambda.Raw String body) {
     return "Hello" + body "!";
 }
 </code> </pre>

 The lambda could also return a new model and use the section body as a template instead
 of raw content:

 <pre><code class="language-hbs">
 {{#context}}
 {{#lambda}}{{message}}{{/lambda}}
 {{/context}}
 </code> </pre>


 <pre><code class="language-java">
 record Model(String message){}

 &#64;JStacheLambda
 public Model lambda(SomeType context) {
     return new Model("Hello " + context.name() + "!");
 }
 </code> </pre>

 <strong>TIP:</strong> A nice feature of mustache when using lambdas is leveraging
 dotted path support for reduced syntax noise:

 <pre><code class="language-hbs">
 {{#context.lambda}}{{message}}{{/context.lambda}}
 </code> </pre>

 Notice how this sort of resembles OOP method calls. We can even pass virtual keys like
 <code>-index</code>.

 <pre><code class="language-hbs">
 {{#someList}}
 {{.}} is {{#-index.isEven}}{{#.}}even{{/.}}{{^.}}odd{{/.}}{{/-index.isEven}}
 {{/someList}}
 </code> </pre>

 <pre><code class="language-java">
 &#64;JStacheLambda
 public boolean isEven(int index) {
     return index % 2 == 0;
 }
 </code> </pre>

 Output of <code>someList = List.of("a", "b", "c")</code>: <pre>
 a is odd
 b is even
 c is odd
 </pre>

 If we want to duplicate or wrap the results of the lambda we can use lambda templates:

 <pre><code class="language-java">
 &#64;JStacheLambda(template="&lt;span class="{{>@section}}"&gt;{{>@section}}&lt;span&gt;")
 public boolean isEven(int index) {
     return index % 2 == 0;
 }
 </code> </pre>

 Output of <code>someList = List.of("a", "b", "c")</code>: <pre>
 a is &lt;span class="odd"&gt;odd&lt;span&gt;
 b is &lt;span class="even"&gt;even&lt;span&gt;
 c is &lt;span class="odd"&gt;odd&lt;span&gt;
 </pre>

 <p>
 JStachio lambdas just like normal method calls do not have to be directly enclosed on
 the context objects but can be on implemented interfaces or inherited and thus models
 can be "mixed in" with interfaces to achieve sharing of lambdas. However there is
 currently no support for static methods to be used as lambdas.
 <p>
 JStachio lambdas work in basically two modes for <strong>parameters</strong>:
 <ol>
 <li><strong>Context aware:</strong> The default. The top of the stack is passed if an
 argument is present and is not annotated with <a href="JStacheLambda.Raw.html" title="annotation interface in io.jstach.jstache"><code>JStacheLambda.Raw</code></a>.
 <li><strong>Raw:</strong> If a string parameter is annoated with <a href="JStacheLambda.Raw.html" title="annotation interface in io.jstach.jstache"><code>JStacheLambda.Raw</code></a> it will be
 passed the contents of the lambda section call. <strong>Some caveats:</strong>
 <ul>
 <li><em>While this mode appears to be the default for the spec it is not for
 JStachio.</em></li>
 <li><em>The contents may not be valid mustache as the spec does not define that it has
 to be.</em></li>
 <li><em>If the lambda start tag is standalone the space and newline following the tag
 will not be passed to the lambda.</em></li>
 </ul>
 </ol>
 <p>
 Similarly JStachio works in two modes for <strong>return types</strong>:
 <ol>
 <li><strong>Model: </strong> The default. The returned model is pushed onto the context
 stack and the contents of the lambda section call are used as an inline template and
 rendered against it.
 <li><strong>Raw: </strong> If the return type is a <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link"><code>String</code></a> and the method is
 annotated with <a href="JStacheLambda.Raw.html" title="annotation interface in io.jstach.jstache"><code>JStacheLambda.Raw</code></a> the contents of the string are directly written
 <em>unescaped</em>.
 </ol>
 Regardless of parameter and return annotations the method must always be annotated with
 this annotation to be discovered.
 <p>
 Due to the static nature of JStachio, JStachio does not support returning
 <strong>truly</strong> dynamic templates which is the optional lambda spec default if a
 <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link"><code>String</code></a> is returned. That is you cannot construct a string as a template at
 runtime.
 <p>
 That being said the lambda can ostensibly return a template (and a model that the
 template uses) that then references the section body as a partial by using
 <a href="#template()"><code>template()</code></a> and then referencing the section body with the partial named
 <a href="#SECTION_PARTIAL_NAME">"@section"</a>. This allows repeating or wrapping the passed in section
 body. In some other mustache implementations this accomplished with a render callback
 but because templates are compiled statically this is a powerful declaritive
 workaround.
 <p>
 For those that are coming from other Mustache implementations the JStachio's lambda
 model is very similar to the
 <a href="https://github.com/samskivert/jmustache">JMustache</a> model and does not have
 a direct analog to
 <a href="https://github.com/spullara/mustache.java">mustache.java</a> of returning
 <code>Function&lt;String,String&gt; </code> where the function will automatically be called.</div>
<dl class="notes">
<dt>Author:</dt>
<dd>agentgt</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="JStacheLambda.Raw.html" title="annotation interface in io.jstach.jstache"><code>JStacheLambda.Raw</code></a></li>
<li><a href="JStacheInterfaces.html" title="annotation interface in io.jstach.jstache"><code>JStacheInterfaces</code></a></li>
</ul>
</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static @interface&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="JStacheLambda.Raw.html" class="type-name-link" title="annotation interface in io.jstach.jstache">JStacheLambda.Raw</a></code></div>
<div class="col-last even-row-color">
<div class="block">Tag a method return type of String or parameter of String to be used as a raw
 unprocessed string.</div>
</div>
</div>
</section>
</li>
<!-- =========== ANNOTATION INTERFACE OPTIONAL MEMBER SUMMARY =========== -->
<li>
<section class="member-summary" id="annotation-interface-optional-element-summary">
<h2>Optional Element Summary</h2>
<div class="caption"><span>Optional Elements</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Optional Element</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#name()" class="member-name-link">name</a></code></div>
<div class="col-last even-row-color">
<div class="block">The logical name of the lambda.</div>
</div>
<div class="col-first odd-row-color"><code><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#template()" class="member-name-link">template</a></code></div>
<div class="col-last odd-row-color">
<div class="block">An inline template used for rendering the returned model that has access to the
 lambda section body as a partial.</div>
</div>
</div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#SECTION_PARTIAL_NAME" class="member-name-link">SECTION_PARTIAL_NAME</a></code></div>
<div class="col-last even-row-color">
<div class="block">Name of the partial to render the section body of a lambda call.</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details" id="annotation-interface-element-detail">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="SECTION_PARTIAL_NAME">
<h3>SECTION_PARTIAL_NAME</h3>
<div class="member-signature"><span class="modifiers">static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../src-html/io.jstach.jstache/io/jstach/jstache/JStacheLambda.html#line-163">SECTION_PARTIAL_NAME</a></span></div>
<div class="block">Name of the partial to render the section body of a lambda call.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="#template()"><code>template()</code></a></li>
<li><a href="../../../../constant-values.html#io.jstach.jstache.JStacheLambda.SECTION_PARTIAL_NAME">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ ANNOTATION INTERFACE MEMBER DETAIL =========== -->
<li>
<section class="member-details">
<h2>Element Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="name()">
<h3>name</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../src-html/io.jstach.jstache/io/jstach/jstache/JStacheLambda.html#line-169">name</a></span></div>
<div class="block">The logical name of the lambda. If blank the method name will be used.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>lambda name</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>""</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="template()">
<h3>template</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name"><a href="../../../../src-html/io.jstach.jstache/io/jstach/jstache/JStacheLambda.html#line-210">template</a></span></div>
<div class="block">An inline template used for rendering the returned model that has access to the
 lambda section body as a partial. The section body contents can be accessed as a
 partial with the name <code>&#64;section</code>. <strong>This effectively allows
 you render the section body and wrap or repeat it.</strong> Below is an example:

 <pre><code class="language-hbs">
 {{! template call lambda }}
 {{#context}}
 {{#lambda}}Use the force {{name}}{{/lambda}} {{! "name" will come from the returned model }}
 {{/context}}
 </code> </pre>

 <pre><code class="language-java">
 record Model(String name){}

 public record LambdaModel(List&lt;Model&gt; list) {
 }

 &#64;JStacheLambda(template="""
      {{#list}}
         {{>@section}}
      {{/list}}
      """)
 public LambdaModel lambda(SomeType context) {
     return new LambdaModel(List.of(new Model("Luke"), new Model("Leia"), new Model("Anakin")));
 }
 </code> </pre>

 Output:

 <pre>
 Use the force Luke
 Use the force Leia
 Use the force Anakin
 </pre></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the inline template and if empty is ignored. By default it is empty and
 ignored.</dd>
</dl>
<dl class="notes">
<dt>Default:</dt>
<dd>""</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2023 <a href="https://jstach.io/jstachio">jstachio</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>
<script src="../../../../resources/jstachio.js"></script>
</body>
</html>
