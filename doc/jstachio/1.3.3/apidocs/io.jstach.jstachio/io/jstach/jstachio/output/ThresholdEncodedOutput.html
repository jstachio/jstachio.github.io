<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>ThresholdEncodedOutput (jstachio API 1.3.3)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: module: io.jstach.jstachio, package: io.jstach.jstachio.output, class: ThresholdEncodedOutput">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jstachio.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<div class="about-language"><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>                 <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/handlebars.min.js"></script>                 <script>hljs.highlightAll();</script></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="../../../../module-summary.html">Module</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/ThresholdEncodedOutput.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="module-label-in-type">Module</span>&nbsp;<a href="../../../../module-summary.html">io.jstach.jstachio</a></div>
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">io.jstach.jstachio.output</a></div>
<h1 title="Class ThresholdEncodedOutput" class="title">Class ThresholdEncodedOutput&lt;T,<wbr>E extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a>&gt;</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">io.jstach.jstachio.output.ThresholdEncodedOutput&lt;T,<wbr>E&gt;</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - the downstream output type</dd>
<dd><code>E</code> - the exception type that can be thrown while writing to the output type</dd>
</dl>
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../Output.html" title="interface in io.jstach.jstachio">Output</a>&lt;E&gt;</code>, <code><a href="../Output.CloseableEncodedOutput.html" title="interface in io.jstach.jstachio">Output.CloseableEncodedOutput</a>&lt;E&gt;</code>, <code><a href="../Output.EncodedOutput.html" title="interface in io.jstach.jstachio">Output.EncodedOutput</a>&lt;E&gt;</code>, <code><a href="LimitEncodedOutput.html" title="interface in io.jstach.jstachio.output">LimitEncodedOutput</a>&lt;T,<wbr>E&gt;</code>, <code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/AutoCloseable.html" title="class or interface in java.lang" class="external-link">AutoCloseable</a></code></dd>
</dl>
<dl class="notes">
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="ThresholdEncodedOutput.OutputStreamThresholdEncodedOutput.html" title="class in io.jstach.jstachio.output">ThresholdEncodedOutput.OutputStreamThresholdEncodedOutput</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public abstract non-sealed class </span><span class="element-name"><a href="../../../../../src-html/io.jstach.jstachio/io/jstach/jstachio/output/ThresholdEncodedOutput.html#line-75">ThresholdEncodedOutput</a>&lt;T,<wbr>E extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a>&gt;</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="LimitEncodedOutput.html" title="interface in io.jstach.jstachio.output">LimitEncodedOutput</a>&lt;T,<wbr>E&gt;</span></div>
<div class="block">This abstract output will <a href="#limit">limit</a> buffering by byte count and then
 fallback to pushing to the downstream output type of <code>T</code> once limit is
 exceeded. If the limit is not exceeded then the buffered data will be replayed and
 pushed when <a href="#close()">closed</a>. <em>Consequently this output strategy is a
 better fit for integration of blocking APIs such as Servlet based frameworks where the
 data is pushed instead of pulled. If pulling is more desired (non blocking code
 generally prefers a pull approach) than <a href="BufferedEncodedOutput.html" title="interface in io.jstach.jstachio.output"><code>BufferedEncodedOutput</code></a> is a better fit
 but requires the entire output be buffered.</em>
 <p>
 The output <code>T</code> is lazily created once and only once by calling
 <a href="#createConsumer(int)"><code>createConsumer(int)</code></a> and the total size buffered will be passed if under limit.
 If the limit is exceeded than the size passed will be <code>-1</code>.
 <p>
 <strong>For this implementation to work <a href="#close()"><code>close()</code></a> must be called and thus a
 try-with-resource is recommended regardless if the downstream consumer needs to be
 closed or not! </strong>
 <p>
 The total buffered amount of data is not guaranteed to be exactly at the limit even if
 the total output is greater than the limit.
 <p>
 The advantages to letting this implementation do the buffering instead of the
 downstream framework is saving memory in that the pre-encoded parts of the template are
 just pointers and are not copied multiple times. Since this output instance will be
 doing the buffering it is important to minimize downstream buffering by letting the
 framework know that it does not need to buffer.

 <h2>Example for Servlet output:</h2> <pre><code class="language-java">
 class ServletThresholdEncodedOutput extends ThresholdEncodedOutput.OutputStreamThresholdEncodedOutput {

     private final HttpServletResponse response;

     public ServletThresholdEncodedOutput(Charset charset, HttpServletResponse response) {
         super(charset, calculateLimit(response));
         this.response = response;
     }

     private static int calculateLimit(HttpServletResponse response) {
         int limit = response.getBufferSize();
         if (limit &lt;= 0) {
             return 1024 * 32;
         }
         return limit;
     }

     &#64;Override
     protected OutputStream createConsumer(int size) throws IOException {
         if (size > -1) {
             response.setContentLength(size);
              // It is already all in memory so we do not need a buffer.
             response.setBufferSize(0);
         }
         return response.getOutputStream();
     }

 }
 </code> </pre></div>
<dl class="notes">
<dt>Author:</dt>
<dd>agentgt</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="ThresholdEncodedOutput.OutputStreamThresholdEncodedOutput.html" title="class in io.jstach.jstachio.output"><code>ThresholdEncodedOutput.OutputStreamThresholdEncodedOutput</code></a></li>
</ul>
</dd>
<dt>API Note</dt>
<dd>This class is not thread safe.</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static class&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="ThresholdEncodedOutput.OutputStreamThresholdEncodedOutput.html" class="type-name-link" title="class in io.jstach.jstachio.output">ThresholdEncodedOutput.OutputStreamThresholdEncodedOutput</a></code></div>
<div class="col-last even-row-color">
<div class="block">An OutputStream backed buffer limited encoded output.</div>
</div>
</div>
<div class="inherited-list">
<h2 id="nested-classes-inherited-from-class-io.jstach.jstachio.Output">Nested classes/interfaces inherited from interface&nbsp;io.jstach.jstachio.<a href="../Output.html" title="interface in io.jstach.jstachio">Output</a></h2>
<code><a href="../Output.CloseableEncodedOutput.html" title="interface in io.jstach.jstachio">Output.CloseableEncodedOutput</a>&lt;<a href="../Output.CloseableEncodedOutput.html" title="type parameter in Output.CloseableEncodedOutput">E</a> extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a>&gt;, <a href="../Output.EncodedOutput.html" title="interface in io.jstach.jstachio">Output.EncodedOutput</a>&lt;<a href="../Output.EncodedOutput.html" title="type parameter in Output.EncodedOutput">E</a> extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a>&gt;, <a href="../Output.StringOutput.html" title="class in io.jstach.jstachio">Output.StringOutput</a></code></div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>protected final int</code></div>
<div class="col-second even-row-color"><code><a href="#limit" class="member-name-link">limit</a></code></div>
<div class="col-last even-row-color">
<div class="block">The maximum number of bytes to buffer.</div>
</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier</div>
<div class="table-header col-second">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>protected </code></div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(java.nio.charset.Charset,int)" class="member-name-link">ThresholdEncodedOutput</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/charset/Charset.html" title="class or interface in java.nio.charset" class="external-link">Charset</a>&nbsp;charset,
 int&nbsp;limit)</code></div>
<div class="col-last even-row-color">
<div class="block">Create with charset and limit.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#append(java.lang.CharSequence)" class="member-name-link">append</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/CharSequence.html" title="class or interface in java.lang" class="external-link">CharSequence</a>&nbsp;s)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Analogous to <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Appendable.html#append(java.lang.CharSequence)" title="class or interface in java.lang" class="external-link"><code>Appendable.append(CharSequence)</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#append(java.lang.String)" class="member-name-link">append</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;s)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Analogous to <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Appendable.html#append(java.lang.CharSequence)" title="class or interface in java.lang" class="external-link"><code>Appendable.append(CharSequence)</code></a> which by default treats the
 String as a CharSequence.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/charset/Charset.html" title="class or interface in java.nio.charset" class="external-link">Charset</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#charset()" class="member-name-link">charset</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">The charset that the encoded output <em>should</em> be.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#close()" class="member-name-link">close</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">If the limit is not exceeded then the buffered data will be replayed and pushed
 when closed.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#close(T)" class="member-name-link">close</a><wbr>(<a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">T</a>&nbsp;consumer)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Called to close the consumer.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>@Nullable <a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">T</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#consumer()" class="member-name-link">consumer</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">The created consumer.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract <a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">T</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#createConsumer(int)" class="member-name-link">createConsumer</a><wbr>(int&nbsp;size)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Creates the consumer.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#limit()" class="member-name-link">limit</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Buffer limit</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#size()" class="member-name-link">size</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This is the current written length.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#write(byte%5B%5D)" class="member-name-link">write</a><wbr>(byte[]&nbsp;bytes)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Analogous to <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/OutputStream.html#write(byte%5B%5D)" title="class or interface in java.io" class="external-link"><code>OutputStream.write(byte[])</code></a>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>protected abstract void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#write(T,byte%5B%5D)" class="member-name-link">write</a><wbr>(<a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">T</a>&nbsp;consumer,
 byte[]&nbsp;bytes)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Writes to a consumer.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-io.jstach.jstachio.Output">Methods inherited from interface&nbsp;io.jstach.jstachio.<a href="../Output.html" title="interface in io.jstach.jstachio">Output</a></h3>
<code><a href="../Output.html#append(boolean)">append</a>, <a href="../Output.html#append(double)">append</a>, <a href="../Output.html#append(int)">append</a>, <a href="../Output.html#append(long)">append</a>, <a href="../Output.html#append(short)">append</a>, <a href="../Output.html#toAppendable()">toAppendable</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-io.jstach.jstachio.Output.EncodedOutput">Methods inherited from interface&nbsp;io.jstach.jstachio.<a href="../Output.EncodedOutput.html" title="interface in io.jstach.jstachio">Output.EncodedOutput</a></h3>
<code><a href="../Output.EncodedOutput.html#append(char)">append</a>, <a href="../Output.EncodedOutput.html#append(java.lang.CharSequence,int,int)">append</a>, <a href="../Output.EncodedOutput.html#write(byte%5B%5D,int,int)">write</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="limit">
<h3>limit</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/io.jstach.jstachio/io/jstach/jstachio/output/ThresholdEncodedOutput.html#line-86">limit</a></span></div>
<div class="block">The maximum number of bytes to buffer.</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(java.nio.charset.Charset,int)">
<h3>ThresholdEncodedOutput</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/io.jstach.jstachio/io/jstach/jstachio/output/ThresholdEncodedOutput.html#line-97">ThresholdEncodedOutput</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/charset/Charset.html" title="class or interface in java.nio.charset" class="external-link">Charset</a>&nbsp;charset,
 int&nbsp;limit)</span></div>
<div class="block">Create with charset and limit.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>charset</code> - the encoding to use.</dd>
<dd><code>limit</code> - the amount of total bytes to limit buffering however the total
 buffered amount of data is not guaranteed to be exactly at the limit even if the
 total output is greater than the limit.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="write(T,byte[])">
<h3 id="write(java.lang.Object,byte[])">write</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/io.jstach.jstachio/io/jstach/jstachio/output/ThresholdEncodedOutput.html#line-109">write</a></span><wbr><span class="parameters">(<a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">T</a>&nbsp;consumer,
 byte[]&nbsp;bytes)</span>
                       throws <span class="exceptions"><a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">E</a></span></div>
<div class="block">Writes to a consumer.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>consumer</code> - the consumer created from <a href="#createConsumer(int)"><code>createConsumer(int)</code></a>.</dd>
<dd><code>bytes</code> - data to be written</dd>
<dt>Throws:</dt>
<dd><code><a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">E</a></code> - if an error happens while using the consumer.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createConsumer(int)">
<h3>createConsumer</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type"><a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">T</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/io.jstach.jstachio/io/jstach/jstachio/output/ThresholdEncodedOutput.html#line-119">createConsumer</a></span><wbr><span class="parameters">(int&nbsp;size)</span>
                             throws <span class="exceptions"><a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">E</a></span></div>
<div class="block">Creates the consumer. If size is not <code>-1</code> than the entire output has
 been buffered and can be safely used to set <code>Content-Length</code> before
 creating the actual consumer (often an OutputStream).</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>size</code> - <code>-1</code> indicates that the output is larger than the limit.</dd>
<dt>Returns:</dt>
<dd>the created consumer</dd>
<dt>Throws:</dt>
<dd><code><a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">E</a></code> - an error while creating the consumer</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="close(T)">
<h3 id="close(java.lang.Object)">close</h3>
<div class="member-signature"><span class="modifiers">protected abstract</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/io.jstach.jstachio/io/jstach/jstachio/output/ThresholdEncodedOutput.html#line-127">close</a></span><wbr><span class="parameters">(<a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">T</a>&nbsp;consumer)</span>
                       throws <span class="exceptions"><a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">E</a></span></div>
<div class="block">Called to close the consumer. Implementations can decide whether or not to really
 close the consumer.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>consumer</code> - to be closed or not</dd>
<dt>Throws:</dt>
<dd><code><a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">E</a></code> - if an error happens while closing.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="write(byte[])">
<h3>write</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/io.jstach.jstachio/io/jstach/jstachio/output/ThresholdEncodedOutput.html#line-129">write</a></span><wbr><span class="parameters">(byte[]&nbsp;bytes)</span>
           throws <span class="exceptions"><a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">E</a></span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../Output.EncodedOutput.html#write(byte%5B%5D)">Output.EncodedOutput</a></code></span></div>
<div class="block">Analogous to <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/OutputStream.html#write(byte%5B%5D)" title="class or interface in java.io" class="external-link"><code>OutputStream.write(byte[])</code></a>. Implementations should not
 alter the byte array.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../Output.EncodedOutput.html#write(byte%5B%5D)">write</a></code>&nbsp;in interface&nbsp;<code><a href="../Output.EncodedOutput.html" title="interface in io.jstach.jstachio">Output.EncodedOutput</a>&lt;<a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">T</a>&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>bytes</code> - already encoded bytes</dd>
<dt>Throws:</dt>
<dd><code><a href="../Output.EncodedOutput.html" title="type parameter in Output.EncodedOutput">E</a></code> - if an error happens</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="consumer()">
<h3>consumer</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">@Nullable <a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">T</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/io.jstach.jstachio/io/jstach/jstachio/output/ThresholdEncodedOutput.html#line-162">consumer</a></span>()</div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="LimitEncodedOutput.html#consumer()">LimitEncodedOutput</a></code></span></div>
<div class="block">The created consumer. Maybe <code>null</code> but on successful close should not
 be. <strong>This is not to create the consumer but to fetch it after processing has
 finished</strong> since the consumer is created on demand.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="LimitEncodedOutput.html#consumer()">consumer</a></code>&nbsp;in interface&nbsp;<code><a href="LimitEncodedOutput.html" title="interface in io.jstach.jstachio.output">LimitEncodedOutput</a>&lt;<a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">T</a>,<wbr><a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">E</a> extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a>&gt;</code></dd>
<dt>Returns:</dt>
<dd>created consumer</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="charset()">
<h3>charset</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/charset/Charset.html" title="class or interface in java.nio.charset" class="external-link">Charset</a></span>&nbsp;<span class="element-name"><a href="../../../../../src-html/io.jstach.jstachio/io/jstach/jstachio/output/ThresholdEncodedOutput.html#line-167">charset</a></span>()</div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../Output.EncodedOutput.html#charset()">Output.EncodedOutput</a></code></span></div>
<div class="block">The charset that the encoded output <em>should</em> be.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../Output.EncodedOutput.html#charset()">charset</a></code>&nbsp;in interface&nbsp;<code><a href="../Output.EncodedOutput.html" title="interface in io.jstach.jstachio">Output.EncodedOutput</a>&lt;<a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">T</a>&gt;</code></dd>
<dt>Returns:</dt>
<dd>expected charset</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="close()">
<h3>close</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/io.jstach.jstachio/io/jstach/jstachio/output/ThresholdEncodedOutput.html#line-178">close</a></span>()
           throws <span class="exceptions"><a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">E</a></span></div>
<div class="block">If the limit is not exceeded then the buffered data will be replayed and pushed
 when closed. Regardless <a href="#close(T)"><code>close(Object)</code></a> will be called on the output like
 object.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/AutoCloseable.html#close()" title="class or interface in java.lang" class="external-link">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/AutoCloseable.html" title="class or interface in java.lang" class="external-link">AutoCloseable</a></code></dd>
<dt>Specified by:</dt>
<dd><code><a href="../Output.CloseableEncodedOutput.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="../Output.CloseableEncodedOutput.html" title="interface in io.jstach.jstachio">Output.CloseableEncodedOutput</a>&lt;<a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">T</a>&gt;</code></dd>
<dt>Throws:</dt>
<dd><code><a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">E</a></code> - if an error happens while creating or closing the downstream output</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="size()">
<h3>size</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/io.jstach.jstachio/io/jstach/jstachio/output/ThresholdEncodedOutput.html#line-202">size</a></span>()</div>
<div class="block">This is the current written length.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="LimitEncodedOutput.html#size()">size</a></code>&nbsp;in interface&nbsp;<code><a href="LimitEncodedOutput.html" title="interface in io.jstach.jstachio.output">LimitEncodedOutput</a>&lt;<a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">T</a>,<wbr><a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">E</a> extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a>&gt;</code></dd>
<dt>Returns:</dt>
<dd>current written length</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="limit()">
<h3>limit</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/io.jstach.jstachio/io/jstach/jstachio/output/ThresholdEncodedOutput.html#line-207">limit</a></span>()</div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="LimitEncodedOutput.html#limit()">LimitEncodedOutput</a></code></span></div>
<div class="block">Buffer limit</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="LimitEncodedOutput.html#limit()">limit</a></code>&nbsp;in interface&nbsp;<code><a href="LimitEncodedOutput.html" title="interface in io.jstach.jstachio.output">LimitEncodedOutput</a>&lt;<a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">T</a>,<wbr><a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">E</a> extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a>&gt;</code></dd>
<dt>Returns:</dt>
<dd>limit buffer to this amount of bytes</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="append(java.lang.CharSequence)">
<h3>append</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/io.jstach.jstachio/io/jstach/jstachio/output/ThresholdEncodedOutput.html#line-212">append</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/CharSequence.html" title="class or interface in java.lang" class="external-link">CharSequence</a>&nbsp;s)</span>
            throws <span class="exceptions"><a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">E</a></span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../Output.html#append(java.lang.CharSequence)">Output</a></code></span></div>
<div class="block">Analogous to <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Appendable.html#append(java.lang.CharSequence)" title="class or interface in java.lang" class="external-link"><code>Appendable.append(CharSequence)</code></a>.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../Output.html#append(java.lang.CharSequence)">append</a></code>&nbsp;in interface&nbsp;<code><a href="../Output.html" title="interface in io.jstach.jstachio">Output</a>&lt;<a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">T</a>&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>s</code> - unlike appendable always non null.</dd>
<dt>Throws:</dt>
<dd><code><a href="../Output.html" title="type parameter in Output">E</a></code> - if an error happens while writting to the appendable</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="append(java.lang.String)">
<h3>append</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name"><a href="../../../../../src-html/io.jstach.jstachio/io/jstach/jstachio/output/ThresholdEncodedOutput.html#line-217">append</a></span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;s)</span>
            throws <span class="exceptions"><a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">E</a></span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../Output.html#append(java.lang.String)">Output</a></code></span></div>
<div class="block">Analogous to <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Appendable.html#append(java.lang.CharSequence)" title="class or interface in java.lang" class="external-link"><code>Appendable.append(CharSequence)</code></a> which by default treats the
 String as a CharSequence.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../Output.html#append(java.lang.String)">append</a></code>&nbsp;in interface&nbsp;<code><a href="../Output.html" title="interface in io.jstach.jstachio">Output</a>&lt;<a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">T</a>&gt;</code></dd>
<dt>Specified by:</dt>
<dd><code><a href="../Output.EncodedOutput.html#append(java.lang.String)">append</a></code>&nbsp;in interface&nbsp;<code><a href="../Output.EncodedOutput.html" title="interface in io.jstach.jstachio">Output.EncodedOutput</a>&lt;<a href="ThresholdEncodedOutput.html" title="type parameter in ThresholdEncodedOutput">T</a>&gt;</code></dd>
<dt>Parameters:</dt>
<dd><code>s</code> - unlike appendable always non null.</dd>
<dt>Throws:</dt>
<dd><code><a href="../Output.html" title="type parameter in Output">E</a></code> - if an error happens while writting to the appendable</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2023 <a href="https://jstach.io/jstachio">jstachio</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>
<script src="../../../../../resources/jstachio.js"></script>
</body>
</html>
